---
import Moon from './icons/Moon.astro'
import Sun from './icons/Sun.astro'
---

<button
  type="button"
  class="dark-mode-toggle relative inline-flex h-10 w-10 items-center justify-center rounded-lg text-gray-500 hover:bg-gray-100 focus:ring-2 focus:ring-gray-200 focus:outline-none dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
  aria-label="Toggle dark mode"
>
  <span class="sr-only">Toggle dark mode</span>
  <Sun class="hidden h-5 w-5 dark:block" />
  <Moon class="block h-5 w-5 dark:hidden" />
</button>

<script>
  // Usar querySelectorAll para obtener todos los botones de dark mode
  const toggles = document.querySelectorAll('.dark-mode-toggle')

  toggles.forEach((toggle) => {
    toggle.addEventListener('click', () => {
      const isDark = document.documentElement.classList.contains('dark')

      if (isDark) {
        document.documentElement.classList.remove('dark')
        localStorage.setItem('theme', 'light')
      } else {
        document.documentElement.classList.add('dark')
        localStorage.setItem('theme', 'dark')
      }
    })
  })
</script>
